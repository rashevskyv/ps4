---
permalink: /game-dumps.html
title: Создание дампов собственных игр
author_profile: true
---
{% include toc title="Разделы" %}

Дампить можно как дисковые версии игр, так и цифровые!

# Что понадобится

* Свежая версия [Fake PKG Generator 1.1.3](https://twitter.com/AluProductions){:target="**_blank**"} (обычно разработчки держит свежую версию в закреплённом твите)
* [ps4-dumper](https://github.com/xvortex/ps4-dumper-vtx/releases/latest){:target="**_blank**"} (`gengp4.exe` и `ps4-dumper.bin`)
* USB-накопитель не менее 60Гб (это условная цифра, в ряде случаев игры весят много меньше и спокойно смогут поместится на флешку в 32Гб)
* Свободное место на жестком диске ПК в количестве равном размеру игры, или двукратное количество свободного места на USB-накопителе

# Инструкция

## Часть I - Подготовительные работы

1. Создайте папку `PS4` в корне любого диска на вашем ПК
1. Извлеките содержимое архива с **Fake PKG Generator** в папку `PS4` на вашем ПК
1. Поместите `gengp4.exe` (находится в архиве `ps4-dumper-vtx` в папке `gengp4`) в папку `PS4` на вашем ПК
1. **Если игра на диске**: 
	1. Запустите игру на консоли и дойдите до главного меню. Дождитесь окончания установки игры на диск, как правило этот момент соответствует моменту остановки диска в приводе (ориентируйтесь на слух)
		* Полоска установки на иконке дисковой версии игры никак **не связана** с установкой игры на диск!!
	1. Закройте игру
1. [Обновите игру до последней версии](game-patches){:target="**_blank**"}, если это возможно

## Часть II - Дампинг игры на носитель

{% include inc/launch-exploit.txt 

	payload='Dumper'
	
%}
1. Сверните браузер кнопкой (PS)
	* Браузер необходимо именно свернуть, а не закрывать!
1. Запустите игру
1. Сверните игру 
	* Игру необходимо именно свернуть, а не закрывать!
1. По завершению дампинга приставка выключится
* Дамп будет сниматься довольно продолжительное время

## Часть III - Создание PKG

1. Подключите USB-накопитель с дампом игры к ПК
1. Запустите `gengp4.exe` из папки `PS4` на вашем ПК
1. Нажмите '**File -> Open**' и выберите папку на USB-носителе, названную "**CUSAxxxxx-app**" вашей игры
1. Нажмите '**Generate GP4**'
1. Дождитесь окончания создания списка
1. Нажмите '**Save GP4**'
1. Выберите место для сохранения `.gp4-файла` с проектом для вашей игры
1. Запустите `orbis-pub-gen.exe` из папки с **Fake PKG Generator** 
1. Нажмите '**File -> Open**' и выберите `.gp4-файл` с проектом для вашей игры
1. Нажмите '**Command -> Build Image**'
1. В открывшемся окне нажмите '**Select**', выберите куда сохранить `.PKG-файл` с вашей игрой и затем нажмите "**Build**"
	* Помните, что игра весит много! Выберите место для сохранения с учетом этого!
	* Для хранения временных файлов использует диск `С:\\` Если у вас на диске недостаточно свободного места, то изменить расположение папки для временных файлов можно зайдя в Мой компьютер -> Свойства -> Дополнительно -> Переменные среды, после чего изменить расположение переменных сред TEMP и TMP для пользователя и для системы.
1. По окончанию процесса в выбранной папке будет создан дамп игры в формате fakePKG
	
## Часть IV - Cобираем патч в PKG

Если ваша игра содержит патчи, то помимо папки "**CUSAxxxxx-app" у вас так же будет папка с названием "CUSAxxxxx-patch**" - это скопированный патч для вашей игры, его необходимо собрать отдельно в самостоятельный .PKG файл. 
{: .notice--warning}

1. Подключите USB-накопитель с дампом игры к ПК
1. Запустите `gengp4.exe` из папки `PS4` на вашем ПК
1. Нажмите '**File -> Open**' и выберите папку на USB-носителе, названную "**CUSAxxxxx-patch**"
1. Нажмите '**Generate GP4**'
1. Дождитесь окончания создания списка
1. Нажмите '**Save GP4**'
1. Выберите место для сохранения `.gp4-файла` с проектом для вашей игры
1. Запустите `orbis-pub-gen.exe` из папки с **Fake PKG Generator** 
1. Нажмите '**File -> Open**' и выберите `.gp4-файл` с проектом для вашей игры
1. Нажмите '**Command -> Project Settings -> Patch**'
1. В строке '**Application package' нажмите кнопку 'Select**' и выберите `.PKG` файл **игры** который мы создали в предыдущих пунктах.
1. Поставьте галочку напротив '**This is a Day 1 Patch' (строку 'The latest QA passed package**' не трогаем)
1. Нажмите '**OK', затем 'File -> Save**'. 
1. В окне программы нажмите '**Command -> Build Image**'
1. В открывшемся окне нажмите '**Select**', выберите куда сохранить `.PKG-файл` с вашей игрой и затем нажмите "**Build**"
	* Для хранения временных файлов использует диск `С:\\` Если у вас на диске недостаточно свободного места, то изменить расположение папки для временных файлов можно зайдя в Мой компьютер -> Свойства -> Дополнительно -> Переменные среды, после чего изменить расположение переменных сред TEMP и TMP для пользователя и для системы.
1. По окончанию процесса в выбранной папке будет создан патч для игры в формате fakePKG

## Часть VI - Дампим DLC

DLC делятся на два типа - ключи разблокировки и DLC с дополнительными файлами. В первом случае DLC является просто ключом для контента, который и так уже есть в игре, DLC его просто активирует. Во втором же случае DLC добавляет контент в игру и содержит в себе ещё ряд дополнительных файлов, за счёт которых, собственно, и идёт добавление нового контента. Дампятся они так же по разному. 

Для того, чтобы понять какого типа ваше дополнение, перейдите в [Playstation Store](https://store.playstation.com/en-us/home/games){:target="_blank"}, **введите в поиске название вашей игры и перейдите на её страницу. Пролистайте вниз и в разделе "Дополнения**" выберите интересующее вас DLC. Посмотрите в левую часть страницы, под изображением игры. Если там указан размер игры - это DLC второго типа. Если размера нет - первого. 

![]({{ base_path }}/images/screenshots/dlc-types.png) 
{: .text-center}
{: .notice--info}

### Дампинг DLC первого типа (без дополнительных данных)

#### Что понадобится

* Свежая версия [psDLC](https://github.com/stooged/psDLC/releases/latest){:target="_blank"}

1. Заспакуйте `.zip`-архив psDLC в ту же папку, где у вас находится `orbis-pub-cmd.exe` (**Fake PKG Generator**)
1. Запустите `psDLC.exe`
1. Введите ID игры для которой ищите DLC в текстовое поле и нажмите "Get DLC List"
1. Выберите нужное DLC (Add-On) и нажмите кнопку Create fPKG 
1. Нужное DLC в формате fakePKG появится в папке `fake_dlc_pkg`
	
### Дампинг DLC второго типа (с дополнительными данными)

1. Запустите игру на консоли и дойдите до главного меню. Дождитесь окончания установки игры на диск, как правило этот момент соответствует моменту остановки диска в приводе (ориентируйтесь на слух)
	* Полоска установки на иконке дисковой версии игры никак **не связана** с установкой игры на диск!!
1. Сверните игру, нажав кнопку (PS)
1. [Подключитесь по FTP](ftp){:target="_blank"} к вашей приставке 
1. Перейдите в папку `/mnt/sandbox/pfsmnt/`
1. Скачайте все папки названия которых оканчивается на `-ac` - это папки, содержащие расшифрованные DLC
	* Например '/mnt/sandbox/pfsmnt/EP0177-CUSA06211_00-DIVAFT39FUTURE00-ac'
1. Запустите `orbis-pub-sfo.exe` из папки с **Fake PKG Generator** 
1. В основном окне в списке "**Category**" выберите "**(PS4) Additional Content**"
1. Нажмите "**Yes**"
1. В поле "**ContentID**" впишите ID вашего DLC. Его можно найти на странице вашего дополнения в [Playstation Store](https://store.playstation.com/en-us/home/games){:target="_blank"} в адресной строке браузера 
	* Например для 'Hatsune Miku: Project DIVA Future Tone Future Sound' это будет `EP0177-CUSA06211_00-DIVAFT39FUTURE00`
1. В левой части окна выберите "**Title Text**" и в поле "**Additional Content Name (Default Language)**" введите название вашего DLC, которое так же можно посмотреть в [Playstation Store](https://store.playstation.com/en-us/home/games){:target="_blank"}
	* Например 'Hatsune Miku: Project DIVA Future Tone Future Sound'
1. В меню "**File" выберите "Save**" и сохраните полученный `.sfo`-файл в папке `PS4/sce_sys` под именем `param.sfo`
	* Например 'PS4/sce_sys/param.sfo'
1. Запустите `orbis-pub-gen.exe` из папки с **Fake PKG Generator** 
1. В меню "**File" выберите "New Project -> Additional Content Package *with* Extra Data**"
1. Дважды нажмите на "**Image0**" и перетащите содержимое папки, содержащей DLC (папка sce_sys + все, что там есть - файлы или директории)
1. Закройте окно
1. В меню "**Commands" выберите "Project settings" и перейдите на вкладку "Package**"
1. В поле "****ContentID****" впишите ID вашего DLC, который вы использовали ранее
	* Например для 'Hatsune Miku: Project DIVA Future Tone Future Sound' это будет `EP0177-CUSA06211_00-DIVAFT39FUTURE00`
1. в поле "**Passcode (32 chars)**" введите `00000000000000000000000000000000`, убедитесь, что в поле "**Entitlement Key**" так же прописано `00000000000000000000000000000000`
1. Нажмите "**OK**"
1. В меню Command выберите "**Build Image -> Output Path**" и выберите место для сохранения вашего fakePKG и нажмите "**Build**"
1. Подождите пока создастся PKG-файл. 
	
## Часть VI - Проверка дампа

Созданный дамп необходимо проверить на работоспособность перед тем, как распространять. Если вы снимали дамп с дисковой версии игры, игру и все её данные нужно будет удалить с приставки. Цифровую версию лучше не удалять, поскольку после вы не сможете её восстановить и сделать дамп заново, если в предыдущий раз этого сделать не получилось. 

1. Удалите лицензионную версию игры и её данные с приставки
1. [Установите](games) собранные pkg-файлы в таком порядке: ИГРА -> ПАТЧ -> DLC
1. Запустите установленную игру и проверьте работают ли сохранения
1. Если игра запускается и сохранения работают, то дам сделан успешно